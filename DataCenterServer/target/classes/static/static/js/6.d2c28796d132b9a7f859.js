webpackJsonp([6],{Ld6Z:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});t("4Zt/");var l=t("z/Aw"),i=t("zL8q"),n={name:"viewDataObj",components:{},data:function(){return{headerTitle:"数据",resId:"",viewType:!1,attrs:[],viewTable:{domId:"",className:"",pageInfo:{page:1,count:0,pageSize:100,total:10},data:[]},viewSearch:{data:[{key:"",condition:"",value:""}]}}},created:function(){this.resId=parseInt(this.$route.path.split("/")[2]),this.getAttrs(),this.getTableData()},methods:{handleAddSer:function(){this.viewSearch.data.push({key:"",condition:"",value:""})},handleDelThis:function(e){this.viewSearch.data.splice(e,1),0==this.viewSearch.data.length&&this.viewSearch.data.push({})},getAttrs:function(){var e=this;l.a.getDataObjectAttrsList({resId:this.resId,pageInfo:{page:0,pageSize:0}}).then(function(a){e.attrs=a.data.list}).catch(function(e){console.log(e),i.Message.error("获取属性列表失败。",e)})},getTableData:function(){var e=this;console.log("ser",this.viewSearch.data);for(var a=this.viewSearch.data.slice(),t=a.length-1;t>=0;--t){""==a[t].key&&a.splice(t,1)}l.a.viewData({condition:a,dataObjectId:this.resId,pageInfo:this.viewTable.pageInfo}).then(function(a){e.viewTable.data=a.data.rtnData,e.viewTable.pageInfo.total=a.data.pageInfo.total}).catch(function(e){console.log(e),i.Message.error(e.message)})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.viewTable.pageInfo.page=1,this.viewTable.pageInfo.pageSize=e,this.handleSearch()},handleCurrentChange:function(e){console.log("当前页: "+e),this.viewTable.pageInfo.page=e,this.handleSearch()}}},s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("div",{staticClass:"breadxian"}),e._v(" "),t("el-breadcrumb-item",[e._v(e._s(e.headerTitle))])],1),e._v(" "),t("div",{staticClass:"breadbottom"}),e._v(" "),t("br"),e._v(" "),t("el-form",{attrs:{inline:"",model:e.viewSearch,"label-position":"right","label-width":"80px"}},[t("div",{staticStyle:{display:"inline-block"}},e._l(e.viewSearch.data,function(a,l){return t("div",{key:l},[t("el-form-item",{attrs:{label:"字段",width:"100"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"item.key"}},e._l(e.attrs,function(e,a){return t("el-option",{key:a,attrs:{label:e.name,value:e.columnName}})}))],1),e._v(" "),t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.condition,callback:function(t){e.$set(a,"condition",t)},expression:"item.condition"}},[t("el-option",{attrs:{label:">",value:"great than"}}),e._v(" "),t("el-option",{attrs:{label:"=",value:"equals"}}),e._v(" "),t("el-option",{attrs:{label:"<",value:"less than"}})],1)],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"输入名称/说明关键词"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1),e._v(" "),t("i",{staticClass:"fa fa-minus-circle",staticStyle:{"font-size":"20px,color:red"},on:{click:function(a){e.handleDelThis(l)}}})],1)})),e._v(" "),t("el-form-item",[t("i",{staticClass:"fa fa-plus-circle",staticStyle:{"font-size":"30px"},on:{click:function(a){e.handleAddSer()}}})]),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.getTableData()}}},[e._v("查询")])],1)],1),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"viewTableClass"},[t("el-table",{attrs:{data:e.viewTable.data,border:"","header-cell-style":{background:"#f9fafc"}}},[t("el-table-column",{attrs:{type:"index",width:"100"}}),e._v(" "),e._l(e.attrs,function(e,a){return t("el-table-column",{key:a,attrs:{prop:e.columnName,label:e.name,width:"150px"}})})],2)],1),e._v(" "),t("el-pagination",{staticClass:"pageArea",attrs:{"current-page":e.viewTable.pageInfo.page,"page-sizes":[100,200,300,400],"page-size":e.viewTable.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.viewTable.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]},o=t("VU/8")(n,s,!1,null,null,null);a.default=o.exports}});
//# sourceMappingURL=6.d2c28796d132b9a7f859.js.map