{"version":3,"sources":["webpack:///src/views/main/pages/viewData.vue","webpack:///./src/views/main/pages/viewData.vue?b7f2","webpack:///./src/views/main/pages/viewData.vue"],"names":["viewData","name","components","data","headerTitle","resId","viewType","attrs","viewTable","domId","className","pageInfo","page","count","pageSize","total","viewSearch","key","condition","value","created","this","parseInt","$route","path","split","getAttrs","getTableData","methods","handleAddSer","push","handleDelThis","index","splice","length","_this","getDataObjectAttrsList","then","res","list","catch","error","console","log","element_ui_common","_this2","arr","slice","dataObjectId","rtnData","message","handleSizeChange","val","handleSearch","handleCurrentChange","pages_viewData","render","_vm","_h","$createElement","_c","_self","separator-class","staticClass","_v","_s","inline","model","label-position","label-width","staticStyle","display","_l","item","label","width","placeholder","callback","$$v","$set","expression","i","j","columnName","font-size","on","click","$event","type","border","header-cell-style","background","prop","current-page","page-sizes","page-size","layout","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/6.d2c28796d132b9a7f859.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <div class=\"breadxian\"></div>\r\n      <el-breadcrumb-item>{{headerTitle}}</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div class=\"breadbottom\"></div>\r\n    <br>\r\n    <!-- 搜索 -->\r\n    <el-form\r\n      inline\r\n      :model=\"viewSearch\"\r\n      label-position=\"right\"\r\n      label-width=\"80px\"\r\n    >\r\n      <div style=\"display:inline-block;\">\r\n        <div\r\n          v-for=\"(item,index) in viewSearch.data\"\r\n          :key=\"index\"\r\n        >\r\n          <el-form-item\r\n            label=\"字段\"\r\n            width=\"100\"\r\n          >\r\n            <el-select\r\n              v-model=\"item.key\"\r\n              placeholder=\"请选择\"\r\n            >\r\n              <el-option\r\n                v-for=\"(i,j) in attrs\"\r\n                :key=\"j\"\r\n                :label=\"i.name\"\r\n                :value=\"i.columnName\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-select\r\n              v-model=\"item.condition\"\r\n              placeholder=\"请选择\"\r\n            >\r\n              <el-option\r\n                label=\">\"\r\n                value=\"great than\"\r\n              ></el-option>\r\n              <el-option\r\n                label=\"=\"\r\n                value=\"equals\"\r\n              ></el-option>\r\n              <el-option\r\n                label=\"<\"\r\n                value=\"less than\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-input\r\n              v-model=\"item.value\"\r\n              placeholder=\"输入名称/说明关键词\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <i\r\n            class=\"fa fa-minus-circle\"\r\n            @click=\"handleDelThis(index)\"\r\n            style=\"font-size:20px,color:red\"\r\n          ></i>\r\n        </div>\r\n      </div>\r\n      <el-form-item>\r\n        <i\r\n          class=\"fa fa-plus-circle\"\r\n          @click=\"handleAddSer()\"\r\n          style=\"font-size:30px\"\r\n        ></i>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"getTableData()\"\r\n        >查询</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <br>\r\n    <div class=\"viewTableClass\">\r\n      <el-table\r\n        :data=\"viewTable.data\"\r\n        border\r\n        :header-cell-style=\"{background:'#f9fafc'}\"\r\n      >\r\n        <el-table-column\r\n          type=\"index\"\r\n          width=\"100\"\r\n        >\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          v-for=\"(item,index) in attrs\"\r\n          :key=\"index\"\r\n          :prop=\"item.columnName\"\r\n          :label=\"item.name\"\r\n          width=\"150px\"\r\n        >\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n\r\n    </div>\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n      class=\"pageArea\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"viewTable.pageInfo.page\"\r\n      :page-sizes=\"[100, 200, 300, 400]\"\r\n      :page-size=\"viewTable.pageInfo.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"viewTable.pageInfo.total\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"@/libs/axios\";\r\nimport api from \"@/api/data-model/data\";\r\nimport { Message } from \"element-ui\";\r\nexport default {\r\n  name: \"viewDataObj\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      headerTitle: \"数据\",\r\n      resId: \"\",\r\n      //页面类型\r\n      viewType: false,\r\n      attrs: [],\r\n      //页面表格\r\n      viewTable: {\r\n        //dom元素id\r\n        domId: \"\",\r\n        //样式表类名\r\n        className: \"\",\r\n        pageInfo: {\r\n          //当前页码\r\n          page: 1,\r\n          //数据总数量\r\n          count: 0,\r\n          //每页包含数据量\r\n          pageSize: 100,\r\n          total: 10\r\n        },\r\n        //数据\r\n        data: []\r\n      },\r\n      //数据搜索\r\n      viewSearch: {\r\n        data: [{ key: \"\", condition: \"\", value: \"\" }]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.resId = parseInt(this.$route.path.split(\"/\")[2]);\r\n    this.getAttrs();\r\n    this.getTableData();\r\n  },\r\n  methods: {\r\n    handleAddSer() {\r\n      this.viewSearch.data.push({ key: \"\", condition: \"\", value: \"\" });\r\n    },\r\n    handleDelThis(index) {\r\n      this.viewSearch.data.splice(index, 1);\r\n      if (this.viewSearch.data.length == 0) {\r\n        this.viewSearch.data.push({});\r\n      }\r\n    },\r\n    // 获取属性列表\r\n    getAttrs() {\r\n      api\r\n        .getDataObjectAttrsList({\r\n          resId: this.resId,\r\n          pageInfo: { page: 0, pageSize: 0 }\r\n        })\r\n        .then(res => {\r\n          this.attrs = res.data.list;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          Message.error(\"获取属性列表失败。\", error);\r\n        });\r\n    },\r\n    //获取表格数据\r\n    getTableData() {\r\n      console.log(\"ser\", this.viewSearch.data);\r\n      var arr = this.viewSearch.data.slice();\r\n      for (var index = arr.length-1; index>=0;--index) {\r\n          var element = arr[index];\r\n          if(element.key==\"\"){\r\n            arr.splice(index,1);\r\n          }\r\n      }      \r\n      api\r\n        .viewData({\r\n          condition: arr,\r\n          dataObjectId: this.resId,\r\n          pageInfo: this.viewTable.pageInfo\r\n        })\r\n        .then(res => {\r\n          this.viewTable.data = res.data.rtnData;\r\n          this.viewTable.pageInfo.total = res.data.pageInfo.total;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          Message.error(error.message);\r\n        });\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.viewTable.pageInfo.page = 1;\r\n      this.viewTable.pageInfo.pageSize = val;\r\n      this.handleSearch();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.viewTable.pageInfo.page = val;\r\n      this.handleSearch();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/main/pages/viewData.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('div',{staticClass:\"breadxian\"}),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.headerTitle))])],1),_vm._v(\" \"),_c('div',{staticClass:\"breadbottom\"}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-form',{attrs:{\"inline\":\"\",\"model\":_vm.viewSearch,\"label-position\":\"right\",\"label-width\":\"80px\"}},[_c('div',{staticStyle:{\"display\":\"inline-block\"}},_vm._l((_vm.viewSearch.data),function(item,index){return _c('div',{key:index},[_c('el-form-item',{attrs:{\"label\":\"字段\",\"width\":\"100\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(item.key),callback:function ($$v) {_vm.$set(item, \"key\", $$v)},expression:\"item.key\"}},_vm._l((_vm.attrs),function(i,j){return _c('el-option',{key:j,attrs:{\"label\":i.name,\"value\":i.columnName}})}))],1),_vm._v(\" \"),_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(item.condition),callback:function ($$v) {_vm.$set(item, \"condition\", $$v)},expression:\"item.condition\"}},[_c('el-option',{attrs:{\"label\":\">\",\"value\":\"great than\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"=\",\"value\":\"equals\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"<\",\"value\":\"less than\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"输入名称/说明关键词\"},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}})],1),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-minus-circle\",staticStyle:{\"font-size\":\"20px,color:red\"},on:{\"click\":function($event){_vm.handleDelThis(index)}}})],1)})),_vm._v(\" \"),_c('el-form-item',[_c('i',{staticClass:\"fa fa-plus-circle\",staticStyle:{\"font-size\":\"30px\"},on:{\"click\":function($event){_vm.handleAddSer()}}})]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.getTableData()}}},[_vm._v(\"查询\")])],1)],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"viewTableClass\"},[_c('el-table',{attrs:{\"data\":_vm.viewTable.data,\"border\":\"\",\"header-cell-style\":{background:'#f9fafc'}}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"100\"}}),_vm._v(\" \"),_vm._l((_vm.attrs),function(item,index){return _c('el-table-column',{key:index,attrs:{\"prop\":item.columnName,\"label\":item.name,\"width\":\"150px\"}})})],2)],1),_vm._v(\" \"),_c('el-pagination',{staticClass:\"pageArea\",attrs:{\"current-page\":_vm.viewTable.pageInfo.page,\"page-sizes\":[100, 200, 300, 400],\"page-size\":_vm.viewTable.pageInfo.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.viewTable.pageInfo.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1823e586\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/main/pages/viewData.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./viewData.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./viewData.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1823e586\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./viewData.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/main/pages/viewData.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}